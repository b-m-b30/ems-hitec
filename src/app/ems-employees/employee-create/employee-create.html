<app-modal [isOpen]="isModalOpen()" [title]="'Neuen Mitarbeiter erstellen'" (close)="closeModal()">
  <form class="employee-form" (submit)="onSubmit(); $event.preventDefault()">

    <section class="form-section">
      <h3>Persönliche Daten</h3>

      <div class="form-field">
        <label for="firstName">Vorname *</label>
        <input id="firstName" type="text" placeholder="Vorname" [value]="firstName()" (input)="firstName.set($any($event.target).value)" />
      </div>

      <div class="form-field">
        <label for="lastName">Nachname *</label>
        <input id="lastName" type="text" placeholder="Nachname" [value]="lastName()" (input)="lastName.set($any($event.target).value)" />
      </div>

      <div class="form-field">
        <label for="city">Ort *</label>
        <input id="city" type="text" placeholder="Ort" [value]="city()" (input)="city.set($any($event.target).value)" />
      </div>
    </section>

    <section class="form-section">
      <h3>Qualifikationen</h3>

      <div class="selected-qualifications">
        @for (qual of selectedQualifications(); track qual.id) {
          <span class="qualification-chip">
            {{ qual.skill }}
            <button type="button" (click)="removeQualification(qual.id)">
              <lucide-angular [img]="XIcon" class="qualification-remove" size="12px"></lucide-angular>
            </button>
          </span>
        }
      </div>

      <div class="form-field">
        <select (change)="onAddQualification($event)">
          <option value="">Qualifikation hinzufügen...</option>
          @for (q of qualifications(); track q.id) {
            <option
              [value]="q.id"
              [disabled]="isQualificationSelected(q.id)"
            >
              {{ q.skill }}
            </option>
          }
        </select>
      </div>

      <button type="button" class="new-qualification-button" (click)="openNewQualificationModal()">
        Neue Qualifikation erstellen
      </button>
    </section>

    <div class="form-actions">
      <button type="button" class="cancel-button" (click)="closeModal()">Abbrechen</button>
      <button type="submit" class="submit-button" [disabled]="!formValid()">Mitarbeiter erstellen</button>
    </div>

    @if (errorMessage()) {
      <div class="employees-list-error">{{ errorMessage() }}</div>
    }
  </form>
</app-modal>

<app-modal [isOpen]="isNewQualificationModalOpen()" [title]="'Neue Qualifikation erstellen'" (close)="closeNewQualificationModal()">
    <form class="new-qualification-form" (submit)="onSubmitNewQualification(); $event.preventDefault()">
      <h3>Neue Qualifikation erstellen</h3>
  
      <div class="form-field">
        <label for="newSkill">Qualifikation *</label>
        <input id="newSkill" type="text" placeholder="Qualifikation" [value]="newSkill()" (input)="newSkill.set($any($event.target).value)" />
      </div>
  
      <div class="form-actions">
        <button type="button" class="cancel-button" (click)="closeNewQualificationModal()">Abbrechen</button>
        <button type="submit" class="submit-button" [disabled]="!newQualificationFormValid()">Qualifikation erstellen</button>
      </div>
    </form>
</app-modal>